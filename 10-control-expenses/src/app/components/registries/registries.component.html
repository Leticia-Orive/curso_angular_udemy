<div class="row">
    <div class="col-12">
<!-- Botones para añadir -->

        <div class="row mt-2 mb-2">
            <div class="col-12">
                <button class="btn btn-primary me-2" (click)="openDetail('deposit')"><i class="bi bi-plus"></i> Añadir ingreso</button>
                <button class="btn btn-primary" (click)="openDetail('expense')"><i class="bi bi-plus"></i>Añadir gasto</button>
            </div>
        </div>
        <!-- Mostramos los registros -->
        @for(registry of registriesSignal(); track registry.id){
            <div class="row g-0">
                <div class="col-12 rounded border p-1 mb-2">

                    <div class="row">
                        <!-- Fecha -->
                        <div class="col-2">
                            <span class="d-block fw-bold">Fecha</span>
                            <span class="d-block">{{registry.date | date: 'dd MMM YYYY'}}</span>
                        </div>
                        <!-- Descripcion -->
                        <div class="col-3">
                            <span class="d-block fw-bold">Descripción</span>
                            <span class="d-block">{{registry.description}}</span>
                        </div>
                        <!-- Categoria -->
                        <div class="col-3">
                            <span class="d-block fw-bold">Categoría</span>
                            <!-- Comprobamos si tiene categoria -->
                            @if(registry.idCategory){
                                <!-- Obtenemos la categoria -->
                                @if(registry.idCategory | getCategory | async; as category){
                                    <span class="d-block">{{category.name}}</span>
                                }
                            }
                        </div>
                        <!-- Cantidad -->
                        <div class="col-3">
                            <span class="d-block fw-bold">Cantidad</span>
                            <span class="d-block" [ngClass]="{
                                'text-danger': registry.type === 'expense',
                                'text-success': registry.type === 'deposit'
                            }">
                                {{registry.type === 'deposit' ? '+' : '-'}}{{registry.quantity}}
                            </span>
                        </div>

                        <div class="col-1 text-end align-self-center">
                            <!-- Actualizar -->
                            <i class="bi bi-pencil text-warning me-2"></i>
                            <!-- Borrar -->
                            <i class="bi bi-trash text-danger me-2"></i>
                        </div>
                        
                    </div>

                </div>
            </div>


        } @empty {
            <div class="row">
                <div class="col-12 text-center mb-4">
                    <span class="h3">No hay registros</span>
                </div>
            </div>
        }

        <!-- Paginacion -->
        @if(nextRegistriesSignal() || previousRegistriesSignal()){
            <div class="row mt-2 mb-2">
                <div class="col-6 text-start">
                    @if(previousRegistriesSignal()){
                        <button class="btn btn-primary" (click)="previous()">Página anterior</button>
                    }
                </div>
                <div class="col-6 text-end">
                    @if(nextRegistriesSignal()){
                        <button class="btn btn-primary" (click)="next()">Página siguiente</button>
                    }
                </div>
            </div>
        }
        



    </div>
</div>

@if(showDetail){

     <!-- Detalle -->
    <app-detail (close)="closeDetail()">
         <!-- Titulo del registro -->
        <span class="h1" detail-registry>Registro</span>
        <!-- Contenido del detalle -->
        <div detail-content>
            @if(registrySelected){

            }@else{
                <app-add-registry [typeRegistry]="typeRegistry" (registrySaved)="closeDetail(true)"/>
            }
        </div>


    </app-detail>

}